{% extends 'base.html.twig' %}

{% block title %}Quiz CinÃ©ma - CinÃ©Quest
{% endblock %}

{% block body %}
	<div
		class="container my-5">
		<!-- Header avec animation -->
		<div class="text-center mb-5 quiz-header">
			<h1 class="display-3 main-title mb-3">
				<span>ðŸŽ¬</span> Quiz CinÃ©ma
			</h1>
			<p class="lead text-light animate__animated animate__fadeInUp">
				Teste tes connaissances sur le 7Ã¨me art !
			</p>
		</div>

		{% if quizzes is empty %}
			<div class="text-center py-5">
				<i class="fas fa-film fa-4x text-muted mb-4"></i>
				<h3 class="text-light">Aucun quiz disponible pour le moment</h3>
				<p class="text-muted">Reviens bientÃ´t pour de nouveaux dÃ©fis !</p>
			</div>
		{% else %}
			<!-- Filtres -->
			<div class="quiz-filters mb-4 d-flex justify-content-center gap-3 flex-wrap">
				<button class="btn btn-outline-light filter-btn active" data-filter="all">
					<i class="fas fa-globe me-2"></i>Tous
				</button>
				<button class="btn btn-outline-light filter-btn" data-filter="facile">
					<i class="fas fa-leaf me-2"></i>Facile
				</button>
				<button class="btn btn-outline-light filter-btn" data-filter="moyen">
					<i class="fas fa-bolt me-2"></i>Moyen
				</button>
				<button class="btn btn-outline-light filter-btn" data-filter="difficile">
					<i class="fas fa-fire me-2"></i>Difficile
				</button>
				<button class="btn btn-outline-light filter-btn" data-filter="expert">
					<i class="fas fa-skull me-2"></i>Expert
				</button>
			</div>

			<!-- Grille de quiz -->
			<div class="row g-4" id="quiz-grid">
				{% for quiz in quizzes %}
					<div class="col-md-6 col-lg-4 quiz-card-wrapper" data-difficulty="{{ quiz.difficulty }}" data-theme="{{ quiz.theme }}">
						<div class="quiz-card card bg-dark h-100 border-0 shadow-lg hover-lift">
							<div
								class="card-header bg-gradient-primary border-0 position-relative">
								<!-- Badge difficultÃ© -->
								<span class="difficulty-badge badge position-absolute top-0 end-0 m-3
										                                {{ quiz.difficulty == 'facile' ? 'bg-success' :
										                                   quiz.difficulty == 'moyen' ? 'bg-warning' :
										                                   quiz.difficulty == 'difficile' ? 'bg-danger' : 'bg-dark' }}">
									{% if quiz.difficulty == 'facile' %}ðŸŒ± Facile
										{% elseif quiz.difficulty == 'moyen' %}âš¡ Moyen
										{% elseif quiz.difficulty == 'difficile' %}ðŸ”¥ Difficile
										{% else %}ðŸ’€ Expert
									{% endif %}
								</span>

								<!-- IcÃ´ne thÃ¨me -->
								<div class="theme-icon text-center py-3">
									<i class="fas {{
										                                    quiz.theme == 'action' ? 'fa-bomb' :
										                                    quiz.theme == 'comedie' ? 'fa-laugh' :
										                                    quiz.theme == 'scifi' ? 'fa-robot' :
										                                    quiz.theme == 'horreur' ? 'fa-ghost' :
										                                    quiz.theme == 'classiques' ? 'fa-medal' :
										                                    quiz.theme == 'series' ? 'fa-tv' :
										                                    quiz.theme == 'realisateurs' ? 'fa-video' :
										                                    quiz.theme == 'acteurs' ? 'fa-star' :
										                                    quiz.theme == 'francais' ? 'fa-flag' :
										                                    'fa-film'
										                                }} fa-3x text-white"></i>
								</div>
							</div>

							<div class="card-body d-flex flex-column">
								<h4 class="card-title mb-3">{{ quiz.title }}</h4>

								<div class="quiz-info mb-3">
									<div class="d-flex align-items-center mb-2">
										<i class="fas fa-tag text-primary me-2"></i>
										<span class="text-light">{{ quiz.theme|capitalize }}</span>
									</div>
									<div class="d-flex align-items-center">
										<i class="fas fa-question-circle text-primary me-2"></i>
										<span class="text-light">{{ quiz.questions|length }}
											questions</span>
									</div>
								</div>

								<div class="mt-auto">
									<a href="{{ path('quiz_play', {id: quiz.id}) }}" class="btn btn-primary w-100 btn-lg quiz-play-btn">
										<i class="fas fa-play-circle me-2"></i>Jouer
									</a>
								</div>
							</div>
						</div>
					</div>
				{% endfor %}
			</div>
		{% endif %}
	</div>

	<style>
		.quiz-card {
			transition: all 0.3s ease;
			cursor: pointer;
		}

		.quiz-card:hover {
			transform: translateY(-10px);
			box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3) !important;
		}

		.bg-gradient-primary {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		}

		.filter-btn {
			transition: all 0.3s ease;
		}

		.filter-btn.active {
			background-color: #667eea;
			color: white;
			border-color: #667eea;
		}

		.filter-btn:hover {
			transform: translateY(-2px);
		}

		.quiz-play-btn {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			border: none;
			transition: all 0.3s ease;
		}

		.quiz-play-btn:hover {
			transform: scale(1.05);
			box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
		}

		.quiz-card-wrapper {
			transition: opacity 0.3s ease, transform 0.3s ease;
		}

		.quiz-card-wrapper.hidden {
			opacity: 0;
			transform: scale(0.8);
			display: none;
		}

		.theme-icon {
			animation: float 3s ease-in-out infinite;
		}

		@keyframes float {
			0,
			100% {
				transform: translateY(0px);
			}
			50% {
				transform: translateY(-10px);
			}
		}
	</style>

	<script>
		document.addEventListener('DOMContentLoaded', function () {
const filterButtons = document.querySelectorAll('.filter-btn');
const quizCards = document.querySelectorAll('.quiz-card-wrapper');

filterButtons.forEach(button => {
button.addEventListener('click', function () { // Mise Ã  jour des boutons actifs
filterButtons.forEach(btn => btn.classList.remove('active'));
this.classList.add('active');

const filter = this.dataset.filter;

// Filtrage des cartes
quizCards.forEach(card => {
if (filter === 'all' || card.dataset.difficulty === filter) {
card.classList.remove('hidden');
} else {
card.classList.add('hidden');
}
});
});
});
});
	</script>
{% endblock %}
