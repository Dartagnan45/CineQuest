{# templates/movie_list/index.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Mes Listes
{% endblock %}

{% block body %}
	<div
		class="container py-5">

		{# En-t√™te de page #}
		<div class="d-flex justify-content-between align-items-center mb-5 border-bottom pb-3">
			<div>
				<h1 class="main-title fw-bold mb-0">üé¨ Mes Listes</h1>
				<p class="text-white mb-2">G√©rez vos collections de films et s√©ries pr√©f√©r√©s.</p>
			</div>

			<a href="{{ path('app_movie_list_new') }}" class="btn btn-primary shadow-sm">
				<i class="fas fa-plus me-2"></i>Cr√©er une nouvelle liste
			</a>
		</div>

		{# Contenu principal #}
		{% if movie_lists is not empty %}
			<div class="row g-4">
				{% for list in movie_lists %}
					{# Ic√¥ne automatique selon le nom de la liste #}
					{% set icon = 'fa-folder-open' %}
					{% if 'panth√©on' in list.name|lower %}
						{% set icon = 'fa-trophy' %}
					{% elseif 'carte' in list.name|lower %}
						{% set icon = 'fa-map' %}
					{% endif %}

					<div class="col-md-6 col-lg-4">
						<div
							class="movie-list-card position-relative text-white overflow-hidden">

							{# --- FOND AVEC LES AFFICHES DES FILMS DE LA LISTE --- #}
							<div class="movie-list-bg">
								{% if list.movieListItems|length > 0 %}
									{% for item in list.movieListItems|slice(0, 6) %}
										{% if item.posterPath %}
											<img src="{{ 'https://image.tmdb.org/t/p/w300' ~ item.posterPath }}" alt="" loading="lazy">
										{% else %}
											<img src="{{ asset('build/images/cine-room.jpeg') }}" alt="CineQuest">
										{% endif %}
									{% endfor %}
								{% else %}
									<img src="{{ asset('build/images/cine-room.jpeg') }}" alt="CineQuest">
								{% endif %}
							</div>

							{# Superposition sombre pour la lisibilit√© #}
							<div class="movie-list-overlay"></div>

							{# Contenu principal de la carte #}
							<div class="movie-list-content position-relative p-4">
								<h5 class="card-title mb-2">
									<i class="fas {{ icon }} me-2
																				                  {% if icon == 'fa-trophy' %}text-warning
																				                  {% elseif icon == 'fa-map' %}text-info
																				                  {% endif %}"></i>
									{{ list.name }}
								</h5>

								{% if list.description %}
									<p class="text-light small mb-3">{{ list.description }}</p>
								{% endif %}

								<a href="{{ path('app_movie_list_show', {'id': list.id}) }}" class="btn btn-outline-light btn-sm w-100 mt-3">
									<i class="fas fa-eye me-1"></i>
									Voir la liste
								</a>
							</div>
						</div>
					</div>
				{% endfor %}
			</div>
		{% else %}
			<div class="text-center py-5">
				<i class="fas fa-list fa-3x text-secondary mb-3"></i>
				<p class="lead text-muted mb-4">
					Vous n‚Äôavez encore cr√©√© aucune liste.
				</p>
				<a href="{{ path('app_movie_list_new') }}" class="btn btn-primary">
					<i class="fas fa-plus me-1"></i>Cr√©er ma premi√®re liste
				</a>
			</div>
		{% endif %}
	</div>

{% endblock %}
